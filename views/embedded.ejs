<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Example Product - Volley DemoStore</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-slate-50 to-blue-50 min-h-screen flex flex-col">

    <!-- Navigation Bar -->
    <nav class="bg-white shadow-sm border-b border-slate-200">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <!-- Logo -->
                <div class="flex items-center">
                    <img src="/images/logo.svg" width="120" class="drop-shadow-sm"/>
                </div>

                <!-- Cart and User Icons -->
                <div class="flex items-center space-x-6">
                    <!-- Cart Icon -->
                    <div class="relative cursor-pointer">
                        <svg class="w-6 h-6 text-slate-600 hover:text-slate-800 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.1 5H19M9 19a1 1 0 100 2 1 1 0 000-2zm8 0a1 1 0 100 2 1 1 0 000-2z"/>
                        </svg>
                        <span class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
                    </div>

                    <!-- User Icon -->
                    <div class="cursor-pointer">
                        <svg class="w-6 h-6 text-slate-600 hover:text-slate-800 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-6 py-12 max-w-6xl">
        <div class="grid md:grid-cols-2 gap-12 items-start">

            <!-- Product Image -->
            <div class="bg-white rounded-xl shadow-lg p-8">
                <div class="aspect-square bg-gradient-to-br from-slate-100 to-slate-200 rounded-lg flex items-center justify-center">
                    <div class="text-center text-slate-500">
                        <svg class="w-24 h-24 mx-auto mb-4" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
                        </svg>
                        <p class="text-sm">Product Image</p>
                    </div>
                </div>
            </div>

            <!-- Product Details -->
            <div class="space-y-6">
                <!-- Product Title -->
                <h1 class="text-4xl font-bold text-slate-800">Embedded Example</h1>

                <!-- Price -->
                <div class="text-3xl font-semibold" style="color: #FF652E;">50c</div>

                <!-- Product Description -->
                <div class="space-y-4 text-slate-600 text-lg leading-relaxed">
                    <p>This is a demonstration product designed to showcase Volley payments.</p>

                    <p>Experience a hosted checkout process powered by Volley.</p>

                    <p>
                      <small>Please note: This is for demonstration purposes only. No actual product will be shipped.</small>
                    </p>
                </div>

                <script async src="https://app.volley.nz/js/checkout-element.js"></script>

                <volley-checkout
                  request_id="<%= requestId %>"
                  orientation="vertical">
                </volley-checkout>

                <div class="pt-4">
                    <a href="/checkout.html" class="block w-full text-center text-white font-semibold px-8 py-4 rounded-full text-lg transition-all duration-300 transform focus:outline-none focus:ring-4 focus:ring-orange-300" style="background-color: #FF652E;">
                      Buy now
                    </a>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-slate-200 mt-auto">
        <div class="container mx-auto px-6 py-8">
            <div class="text-center space-y-4">
                <!-- Footer Logo -->
                <div class="flex justify-center mb-4">
                    <img src="/images/logo.svg" width="100" class="drop-shadow-sm"/>
                </div>

                <!-- Disclaimer Text -->
                <p class="text-slate-600 max-w-2xl mx-auto">
                    This store is only for demonstrating Volley payments only. No goods will be shipped.
                </p>
            </div>
        </div>
    </footer>

    <script>
      // Add event listener for messages from iframe
      window.addEventListener('message', (event) => {
        // Recommended: Verify the origin of the iframe
        if (event.origin !== 'https://app.volley.nz') {
          return;
        }

        console.log(event)

        // Events can be one of:
        //  - volley.payment_cancelled
        //  - volley.payment_failed
        //  - volley.payment_successful

        if (event.data.type === 'volley.payment_successful') {
          const { payment_id, request_id } = event.data.payload;

          // Pass the payment ID back to your backend for validation
          // ... then complete your payment flow
          console.log("Event", event)
        }
      });
    </script>
</body>
</html>
